@model IEnumerable<DataObjects.PlanetVM>

@{
    ViewBag.Title = "Home Page";
}

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>



    $(function () {
        var img = document.getElementById("my-image");

        $("#my-image").click(function (event) {
            // Get the click coordinates relative to the image
            var x = event.pageX - $(this).offset().left;
            var y = event.pageY - $(this).offset().top;

            $("#information-container").html("<p>(" + x.toFixed(2) + ", " + y.toFixed(2) + ")</p>");
   
        });


        function createButtonWithCoordinates(name, x, y, gridNumber, planetLink, systemID, systemLink, sectorID, sectorLink, regionID, regionLink) {
            var img = document.getElementById("my-image");
            // Create a new button element
            var button = $("<button>");
            button.addClass("circular-button");
            button.css("left", ((x / img.offsetWidth) * 100) - .50 + "%");
            button.css("top", ((y / img.offsetHeight) * 100) - .50 + "%");
            button.html("<span class='circular-button-text'>" + name + "</span>");
            // Add the button to the image container
            $("#my-image-container").append(button);
            // Add information to the information container when the button is clicked
            button.click(function () {
                $("#information-container").html(
                    "<div class='card'>" +
                    "<div class='card-header'>" +
                    name +
                    "</div>" +
                    "<div class='card-body'>" +
                    "<h5 class='card-title'>Card title</h5>" +
                    "<p class='card-text'>Some quick example text to build on the card title and make up the bulk of the card's content.</p>" +
                    "</div>" +
                    "<div class='card-footer text-body-secondary'>" +
                    "</div>" +
                    "</div>"
                );
            });
        }

        @foreach(DataObjects.PlanetVM planet in Model)
        {
            @:createButtonWithCoordinates("@planet.PlanetID",
                                       @:  @planet.PlanetCoordinateX,
                                       @:  @planet.PlanetCoordinateY,
                                       @: "@planet.GridNumber",
                                       @: "@planet.PlanetArticleLink",
                                       @: "@planet.SystemID",
                                       @: "@planet.SystemArticleLink",
                                       @: "@planet.SectorID",
                                       @: "@planet.SectorArticleLink",
                                       @: "@planet.RegionID",
                                       @: "@planet.RegionArticleLink");
        }

    });
</script>


<div class="container">
    <br />
</div>
<div class="container rounded" style="position: relative;">
    <div class="row">
        <div class="col-md-8">
            <div id="my-image-container">
                <img id="my-image" src="~/Images/starMap.png" style="max-width: 100%; max-height: 100%;" draggable="false" />
            </div>
        </div>
        <div class="col-md-4">
            <div id="information-container"></div>
        </div>
    </div>
</div>


<style>
    #information-container {
        color: white;
    }

    .circular-button {
        width: 1.4%;
        height: 1.4%;
        font-size: 0.8vw;
        border-radius: 50%;
        border: 1px solid #4d4d4d;
        background: linear-gradient(#222222, #777777);
        color: white;
        text-align: center;
        vertical-align: middle;
        padding: 0;
        position: absolute;
    }

    .circular-button-text {
        position: absolute;
        top: -110%;
        left: 50%;
        transform: translateX(-50%);
        font-size: 50%;
        font-weight: bold;
        pointer-events: none;
    }

    .circular-button:hover {
        background: linear-gradient(#777777, #222222);
        cursor: pointer;
    }

        .circular-button:hover .circular-button-text {
            color: #ffffff;
        }

    .container.rounded {
        border: 2px solid black;
        background-color: #444444;
        border-radius: 10px;
        padding: 20px;
    }

    #my-image-container {
        display: flex;
        justify-content: center;
        align-items: center;
        position: relative;
    }
</style>


